---
title: "é›†æˆ MPC é’±åŒ…ï¼ˆæœºæ„é’±åŒ…ï¼‰"
lang: "zh-hans"
sidebarTitle: "MPC é’±åŒ…ï¼ˆæœºæ„é’±åŒ…ï¼‰"
og:description: "é€šè¿‡ WaaS 2.0 API ä½¿ç”¨ MPC é’±åŒ…ï¼ˆæœºæ„é’±åŒ…ï¼‰çš„å…¥é—¨æŒ‡å—ï¼ŒåŒ…æ‹¬è®¾ç½®ã€å……å¸ã€æå¸å’Œä½™é¢æŸ¥è¯¢ã€‚"
---
<Note>æœ¬æ–‡æ¡£ç”± AI è¾…åŠ©ç¿»è¯‘ã€‚å¦‚éœ€ç¡®è®¤å†…å®¹å‡†ç¡®æ€§ï¼Œè¯·å‚è€ƒ[è‹±æ–‡å®˜æ–¹æ–‡æ¡£](https://www.cobo.com/developers/v2/guides/overview/introduction)ã€‚</Note>
åœ¨æ‚¨é€šè¿‡[Cobo Portal å¿«é€Ÿå…¥é—¨æŒ‡å—](https://manuals.cobo.com/cn/portal/quick-start-guide-mpc)ç†Ÿæ‚‰äº† MPC é’±åŒ…ä¹‹åï¼Œæœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨ä½¿ç”¨ WaaS 2.0 API å°† MPC é’±åŒ…ï¼ˆæœºæ„é’±åŒ…ï¼‰åŠŸèƒ½æ— ç¼é›†æˆåˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ï¼ŒåŒ…æ‹¬ï¼š

1. åˆ›å»ºé’±åŒ…
2. å­˜å…¥å’Œæå–ä»£å¸
3. æŸ¥è¯¢é’±åŒ…ä½™é¢

<Note>æœ¬æŒ‡å—åœ¨æ‰€æœ‰ä»£ç ç¤ºä¾‹ä¸­ä½¿ç”¨[å¼€å‘ç¯å¢ƒ](/v2_cn/guides/overview/environments)ã€‚å»ºè®®æ‚¨é¦–å…ˆä½¿ç”¨å¼€å‘ç¯å¢ƒæµ‹è¯•æ–°åŠŸèƒ½ï¼Œç„¶åå†å°†å…¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</Note>

## æŠ€æœ¯æ¶æ„

åœ¨å¼€å§‹ä¹‹å‰ï¼Œäº†è§£ MPC é’±åŒ…çš„æŠ€æœ¯æ¶æ„ä¼šå¾ˆæœ‰å¸®åŠ©ï¼ŒåŒ…æ‹¬ Vaultã€é’±åŒ…ã€åœ°å€å’Œç§é’¥åˆ†ç‰‡ä¹‹é—´çš„å…³ç³»ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªå®Œæ•´çš„ MPC Vault ä¸­çš„ç»„ä»¶ï¼š

<img src="/cn/images/guides/MPC_Technical Architecture.svg" className="diagram" alt="å®Œæ•´çš„ MPC Vault ä¸­çš„ç»„ä»¶"></img>

- é’±åŒ…å§‹ç»ˆä¸æŸä¸ª Vault ç›¸å…³è”ã€‚Vault æ˜¯æ‰€æœ‰æ‹¥æœ‰ç›¸åŒæ ¹æ‰©å±•å…¬ç§é’¥å¯¹çš„æœºæ„é’±åŒ…çš„é›†åˆã€‚
- æ ¹æ‰©å±•å…¬é’¥ï¼šæ ¹æ‰©å±•å…¬é’¥ç”¨äºåˆ†å±‚ç¡®å®šæ€§ï¼ˆHDï¼‰é’±åŒ…ä¸­ï¼Œä»¥æ´¾ç”Ÿå¤šä¸ªå­å…¬é’¥å’Œåœ°å€ã€‚æ¯ä¸ª Vault æœ‰ä¸¤ä¸ªæ ¹æ‰©å±•å…¬é’¥ï¼Œä¸€ä¸ªä» Secp256k1 æ›²çº¿æ´¾ç”Ÿï¼ˆç”¨äºæ¯”ç‰¹å¸å’Œä»¥å¤ªåŠç­‰é“¾ï¼‰ï¼Œå¦ä¸€ä¸ªä» EdDSA æ›²çº¿æ´¾ç”Ÿï¼ˆç”¨äº Solona å’Œ TON ç­‰é“¾ï¼‰ã€‚è¦äº†è§£æ›´å¤šå…³äºæ ¹æ‰©å±•å…¬é’¥çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…[å¯†é’¥æ´¾ç”Ÿ](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki#specification-key-derivation)ã€‚
- ç§é’¥åˆ†ç‰‡æŒæœ‰è€…ï¼šæ¯ä¸ª Vault å¯ä»¥æœ‰å¤šç§ç§é’¥åˆ†ç‰‡æŒæœ‰è€…ï¼ŒåŒ…æ‹¬ä¸»æ§ç§é’¥ï¼Œç­¾åç§é’¥å’Œæ¢å¤ç§é’¥ã€‚æ¯ç§ç§é’¥åˆ†ç‰‡æŒæœ‰è€…éƒ½åŒ…æ‹¬ä¸€ç»„ TSS Node ï¼Œå­˜å‚¨å¯ä»¥å…±åŒç­¾ç½²äº¤æ˜“æˆ–æ¢å¤æ ¹æ‰©å±•ç§é’¥çš„ç§é’¥åˆ†ç‰‡ã€‚å¯¹äºä¸»æ§ç§é’¥å’Œç­¾åç§é’¥ï¼Œå§‹ç»ˆä¼šæœ‰ä¸€ä¸ªç§é’¥åˆ†ç‰‡æŒæœ‰è€…æ˜¯ Coboã€‚è¦äº†è§£æ›´å¤šå…³äºç§é’¥åˆ†ç‰‡æŒæœ‰è€…ç»„çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…[åˆ›å»ºæŒæœ‰è€…ç»„æ¦‚è§ˆ](https://manuals.cobo.com/cn/portal/mpc-wallets/ocw/holder-group-overview)ã€‚
- TSS ç§é’¥åˆ†ç‰‡ç»„ï¼šæ¯ä¸ª TSS ç§é’¥åˆ†ç‰‡ç»„ç”±ä¸¤ä¸ªæˆ–ä¸‰ä¸ªç§é’¥åˆ†ç‰‡ç»„æˆï¼Œå…·ä½“å–å†³äºæŒæœ‰è€…çš„æ•°é‡ã€‚æ¯ä¸ªç§é’¥åˆ†ç‰‡ç»„å¯ä»¥ä¸ä»åŒä¸€æ¡æ›²çº¿æ´¾ç”Ÿçš„æ ¹æ‰©å±•å…¬é’¥å½¢æˆä¸€ä¸ªå¯†é’¥å¯¹ã€‚æ¯ä¸ªç§é’¥åˆ†ç‰‡éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚

## å‰ææ¡ä»¶

- åœ¨è°ƒç”¨ WaaS API åˆ›å»ºé’±åŒ…ä¹‹å‰ï¼Œæ‚¨å¿…é¡»é¦–å…ˆæŒ‰ç…§[Cobo Portal å¿«é€Ÿå…¥é—¨æŒ‡å—](https://manuals.cobo.com/cn/portal/quick-start-guide-mpc#set-up-an-mpc-vault)ä¸­çš„è¯´æ˜è®¾ç½®ä¸€ä¸ª Vaultã€‚
- æŒ‰ç…§[å‘é€æ‚¨çš„ç¬¬ä¸€ä¸ª API è¯·æ±‚](/v2_cn/guides/get-started/get-started-with-waas)ä¸­çš„è¯´æ˜è®¾ç½®æ‚¨çš„è´¦æˆ·å¹¶å‘é€æ‚¨çš„ç¬¬ä¸€ä¸ª API è¯·æ±‚åˆ° WaaS 2.0 æœåŠ¡ã€‚
- å¦‚æœæ‚¨é€‰æ‹©ä½¿ç”¨ WaaS SDK è€Œä¸æ˜¯æ‰‹åŠ¨ç¼–å†™ API è¯·æ±‚ï¼Œè¯·å‚é˜…ç›¸åº”ç¼–ç¨‹è¯­è¨€çš„ SDK æŒ‡å—ï¼ˆ[Python](/v2_cn/developer-tools/quickstart-python)ã€[Java](https://github.com/CoboGlobal/cobo-waas2-java-sdk)ã€[Go](/v2_cn/developer-tools/quickstart-go)ã€[JavaScript](https://github.com/CoboGlobal/cobo-waas2-js-sdk)ï¼‰ï¼Œå°† SDK é›†æˆåˆ°æ‚¨çš„é¡¹ç›®ä¸­ã€‚


## 1. åˆ›å»ºé’±åŒ…

è®¾ç½®å®Œ Vaultï¼Œåˆ›å»ºç§é’¥åˆ†ç‰‡æŒæœ‰è€…ï¼Œå¹¶ç”Ÿæˆç§é’¥åˆ†ç‰‡åï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹åˆ›å»ºé’±åŒ…äº†ã€‚è°ƒç”¨[åˆ›å»ºé’±åŒ…](/v2/api-references/wallets/create-wallet)æ“ä½œï¼Œå¹¶åœ¨è¯·æ±‚åŒ…ä½“ä¸­æŒ‡å®šä»¥ä¸‹å±æ€§ï¼š

- `name`ï¼šæ‚¨çš„é’±åŒ…åç§°ã€‚
- `wallet_type`ï¼š`MPC`ã€‚
- `wallet_subtype`ï¼š`Org-Controlled`ã€‚
- `vault_id`ï¼šæ‚¨åˆšåˆšåˆ›å»ºçš„ Vault IDã€‚

æˆåŠŸå®Œæˆè¯·æ±‚åï¼Œå“åº”å°†åŒ…å«é’±åŒ… IDï¼Œå³æ‚¨åˆšåˆšåˆ›å»ºçš„é’±åŒ…çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å­˜å‚¨æ­¤é’±åŒ… IDï¼Œå› ä¸ºæ‚¨å°†åœ¨åç»­æ­¥éª¤ä¸­ä½¿ç”¨å®ƒã€‚

<Accordion title="Sample code in Python">
```py
import json
import cobo_waas2
from cobo_waas2.models.create_wallet_params import CreateWalletParams
from cobo_waas2.models.created_wallet_info import CreatedWalletInfo
from cobo_waas2.models.wallet_subtype import WalletSubtype
from cobo_waas2.models.wallet_type import WalletType
from cobo_waas2.rest import ApiException
from pprint import pprint

# Defining the host is optional and defaults to https://api.dev.cobo.com/v2
# See configuration.py for a list of all supported configuration parameters.
configuration = cobo_waas2.Configuration(
    api_private_key="<YOUR_API_SECRET>",
    host="https://api.dev.cobo.com/v2"
)
# Enter a context with an instance of the API client
with cobo_waas2.ApiClient(configuration) as api_client:
    # Create an instance of the API class
    api_instance = cobo_waas2.WalletsApi(api_client)
    create_wallet_params = cobo_waas2.CreateWalletParams(
        actual_instance=cobo_waas2.CreateMpcWalletParams(
            name="<YOUR_WALLET_NAME>",
            wallet_type=WalletType.MPC,
            wallet_subtype=WalletSubtype.ORG_CONTROLLED,
            vault_id="<YOUR_VAULT_ID>"
        )
    )

    try:
        # Create a wallet
        api_response = api_instance.create_wallet(create_wallet_params=create_wallet_params)
        print("The response of WalletsApi->create_wallet:\n")
        print(json.dumps(api_response.to_dict(), indent=2))
    except Exception as e:
        print("Exception when calling WalletsApi->create_wallet: %s\n" % e)
```
</Accordion>

<Accordion title="Sample code in Java">
```java
import com.cobo.waas2.ApiClient;
import com.cobo.waas2.ApiException;
import com.cobo.waas2.Configuration;
import com.cobo.waas2.Env;
import com.cobo.waas2.api.WalletsApi;
import com.cobo.waas2.model.*;

public class CreateWalletExample {
    public static void main(String[] args) {
        ApiClient defaultClient = Configuration.getDefaultApiClient();
        // Use the development environment
        defaultClient.setEnv(Env.DEV);
        // Replace `<YOUR_API_SECRET>` with your API secret
        defaultClient.setPrivKey("<YOUR_API_SECRET>");
        WalletsApi apiInstance = new WalletsApi();
        try {
            CreateMpcWalletParams params = new CreateMpcWalletParams()
                    .name("OCW Example Wallet Demo(Java)")
                    .walletType(WalletType.MPC)
                    .walletSubtype(WalletSubtype.ORG_CONTROLLED)
                    .vaultId("<YOUR_VAULT_ID>");
            CreatedWalletInfo result = apiInstance.createWallet(new CreateWalletParams(params));
            System.out.println(result);
        } catch (ApiException e) {
            System.err.println("Exception when calling WalletsApi#createWallet");
            System.err.println("Status code: " + e.getCode());
            System.err.println("Reason: " + e.getResponseBody());
            System.err.println("Response headers: " + e.getResponseHeaders());
            e.printStackTrace();
        }
    }
}
```
</Accordion>

## 2. å­˜å…¥å’Œæå–ä»£å¸

è®¾ç½®æœºæ„é’±åŒ…åï¼Œæ‚¨å¯ä»¥å­˜å…¥ä¸€äº›ä»£å¸å¹¶å­¦ä¹ å¦‚ä½•æå–ä»£å¸ã€‚

### ç”Ÿæˆå……å¸åœ°å€

è¦æ¥æ”¶ä»£å¸ï¼Œæ‚¨éœ€è¦åœ¨é’±åŒ…ä¸­ç”Ÿæˆå……å¸åœ°å€ã€‚è¦ç”Ÿæˆå……å¸åœ°å€ï¼Œè¯·è°ƒç”¨[Create addresses in wallet](/v2/api-references/wallets/create-addresses-in-wallet) å¹¶æŒ‡å®šä»¥ä¸‹å‚æ•°å’Œå±æ€§ï¼š

- è·¯å¾„ï¼š
  - `wallet_id`ï¼šæ‚¨åˆšåˆšåˆ›å»ºçš„é’±åŒ… IDã€‚
- è¯·æ±‚åŒ…ä½“ï¼š
  - `chain_id`ï¼šåŒºå—é“¾çš„ IDã€‚
  - `count`ï¼šä½¿ç”¨æ­¤å‚æ•°æŒ‡å®šè¦åˆ›å»ºçš„åœ°å€æ•°é‡ã€‚

æˆåŠŸå®Œæˆè¯·æ±‚åï¼Œå“åº”å°†åŒ…å«æ‚¨åˆšåˆšåˆ›å»ºçš„åœ°å€ã€‚æ‚¨ç°åœ¨å¯ä»¥å­˜å…¥ä»£å¸åˆ°è¿™äº›åœ°å€ã€‚

<Accordion title="Sample code in Python">
```py
import json

import cobo_waas2
from cobo_waas2 import (
   CreateAddressRequest,
   AddressEncoding,
)

configuration = cobo_waas2.Configuration(
   # Replace `<YOUR_API_SECRET>` with your API secret
   api_private_key="<YOUR_API_SECRET>",
   # Use the development environment
   host="https://api.dev.cobo.com/v2"
)

# Enter a context with an instance of the API client
with cobo_waas2.ApiClient(configuration) as api_client:
   # Create an instance of the API class
   wallet_api_instance = cobo_waas2.WalletsApi(api_client)
   try:
       # Generate two addresses on the Bitcoin testnet3 (XTN) chain using P2TR encoding
       api_response = wallet_api_instance.create_address(
           wallet_id="<Your Wallet ID>",
           create_address_request=CreateAddressRequest(
               chain_id="XTN", count=2, encoding=AddressEncoding.ENCODING_P2_TR
           ),
       )
       print("The response of WalletsApi->create_address:")
       for address_info in api_response:
           print(json.dumps(address_info.to_dict(), indent=2))

   except Exception as e:
       print("Exception when calling WalletsApi->create_address, %s\n", e)
```
</Accordion>

<Accordion title="Sample code in Java">
```java
import com.cobo.waas2.ApiClient;
import com.cobo.waas2.ApiException;
import com.cobo.waas2.Configuration;
import com.cobo.waas2.Env;
import com.cobo.waas2.api.WalletsApi;
import com.cobo.waas2.model.AddressEncoding;
import com.cobo.waas2.model.AddressInfo;
import com.cobo.waas2.model.CreateAddressRequest;

import java.util.List;
import java.util.UUID;

public class CreateAddressExample {
    public static void main(String[] args) {
        ApiClient defaultClient = Configuration.getDefaultApiClient();
        // Use the development environment
        defaultClient.setEnv(Env.DEV);
        // Replace `<YOUR_API_SECRET>` with your API secret
        defaultClient.setPrivKey("<YOUR_API_SECRET>");
        WalletsApi apiInstance = new WalletsApi();
        try {
            UUID wallet_id = UUID.fromString("<YOUR_WALLET_ID>");
            CreateAddressRequest params = new CreateAddressRequest()
                    .chainId("XTN")
                    .count(2)
                    .encoding(AddressEncoding.BECH32);
            List<AddressInfo> result = apiInstance.createAddress(wallet_id, params);
            for (AddressInfo addressInfo : result)
                System.out.println(addressInfo);
        } catch (ApiException e) {
            System.err.println("Exception when calling WalletsApi#createAddress");
            System.err.println("Status code: " + e.getCode());
            System.err.println("Reason: " + e.getResponseBody());
            System.err.println("Response headers: " + e.getResponseHeaders());
            e.printStackTrace();
        }
    }
}
```
</Accordion>

### å¤„ç†å……å¸

åœ¨å°†ä»£å¸å­˜å…¥ç”Ÿæˆçš„åœ°å€åï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è·Ÿè¸ªå……å¸çŠ¶æ€ã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ Webhookï¼Œå› ä¸ºå®ƒèƒ½æä¾›å®æ—¶é€šçŸ¥ï¼Œç›¸æ¯”å®šæœŸä½¿ç”¨ API æŸ¥è¯¢äº¤æ˜“çŠ¶æ€æ›´ä¸ºé«˜æ•ˆå’Œå®æ—¶ã€‚

#### é€‰é¡¹ 1ï¼šä½¿ç”¨ Webhook è¿›è¡Œå®æ—¶é€šçŸ¥

Webhook æ˜¯ WaaS æœåŠ¡ä¸æ‚¨çš„ App é€šä¿¡çš„é‡è¦æœºåˆ¶ã€‚æ³¨å†Œ Webhook Endpoint åï¼ŒWaaS æœåŠ¡ä¼šåœ¨äº‹ä»¶å‘ç”Ÿæ—¶å°†æ¨é€æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šçš„ URLã€‚

è¦äº†è§£å¦‚ä½•è®¾ç½® Webhook Endpoint å¹¶åœ¨ Cobo Portal ä¸Šæ³¨å†Œï¼Œè¯·å‚é˜… [Webhook å’Œ Callback ç®€ä»‹](/v2_cn/guides/webhooks-callbacks/introduction)ã€‚

è¦è·Ÿè¸ªå……å¸çŠ¶æ€ï¼Œæ‚¨å¯ä»¥è®¢é˜…ä»¥ä¸‹ Webhook äº‹ä»¶ç±»å‹ï¼š

- `wallets.transaction.created`
- `wallets.transaction.updated`
- `wallets.transaction.succeeded`
- `wallets.transaction.failed`

è¦äº†è§£æ¯ä¸ªäº‹ä»¶ç±»å‹çš„è§¦å‘æ¡ä»¶å’Œæ•°æ®ç»“æ„ï¼Œè¯·å‚é˜… [Webhook äº‹ä»¶ç±»å‹å’Œæ•°æ®ç±»å‹](/v2_cn/guides/webhooks-callbacks/webhook-event-type)ã€‚

#### é€‰é¡¹ 2ï¼šé€šè¿‡ API è°ƒç”¨è·å–äº¤æ˜“çŠ¶æ€

è¦æŸ¥è¯¢å……å¸äº¤æ˜“çš„çŠ¶æ€ï¼Œè¯·è°ƒç”¨ [List all transactions](/v2/api-references/transactions/list-all-transactions)ï¼Œå¹¶è®¾ç½®ä»¥ä¸‹æŸ¥è¯¢å‚æ•°ï¼š

- `types`ï¼š`Deposit`ã€‚
- `statuses`ï¼š`Confirming,Completed`ã€‚å¦‚æœæ‚¨ä»å¤–éƒ¨åœ°å€å……å¸ï¼Œåˆ™å¯ä»¥åœ¨äº¤æ˜“ç­‰å¾…æ‰€éœ€çš„ç¡®è®¤æ•°é‡æˆ–æˆåŠŸå®Œæˆæ—¶æŸ¥è¯¢äº¤æ˜“è¯¦ç»†ä¿¡æ¯ã€‚
- `wallet_ids`ï¼šæ‚¨åœ¨ç¬¬ä¸€æ­¥ä¸­åˆ›å»ºçš„é’±åŒ… IDã€‚

<Accordion title="Sample code in Python">
```python
import json
import uuid


import cobo_waas2
from cobo_waas2 import (
   CreateAddressRequest,
   AddressEncoding,
   TransferParams,
   TransferSource,
   MpcTransferSource,
   WalletSubtype,
   TransferDestination, AddressTransferDestination, TransferDestinationType, AddressTransferDestinationAccountOutput,
)


configuration = cobo_waas2.Configuration(
   # Replace `<YOUR_API_SECRET>` with your API secret.
   api_private_key="<YOUR_API_SECRET>",
   # Use the development environment.
   host="https://api.dev.cobo.com/v2"
)


# Enter a context with an instance of the API client
with cobo_waas2.ApiClient(configuration) as api_client:
   # Create an instance of the API class
   transaction_api_instance = cobo_waas2.TransactionsApi(api_client)
   try:
       # List deposit transactions
       api_response = transaction_api_instance.list_transactions(
           types="Deposit",
           statuses="Confirming, Completed",
           wallet_ids="<YOUR_WALLET_ID>"
       )
       print("The response of TransactionsApi->list_transactions:")
       print(json.dumps(api_response.to_dict(), indent=2))


   except Exception as e:
       print("Exception when calling TransactionsApi->list_transactions, %s\n", e)
```
</Accordion>



<Accordion title="Sample code in Java">
```java
import com.cobo.waas2.ApiClient;
import com.cobo.waas2.ApiException;
import com.cobo.waas2.Configuration;
import com.cobo.waas2.Env;
import com.cobo.waas2.api.TransactionsApi;
import com.cobo.waas2.model.ListTransactions200Response;


import java.util.UUID;


public class ListTransactionsExample {
   public static void main(String[] args) {
       ApiClient defaultClient = Configuration.getDefaultApiClient();
       // Use the development environment
       defaultClient.setEnv(Env.DEV);
       // Replace `<YOUR_API_SECRET>` with your API secret
       defaultClient.setPrivKey("<YOUR_API_SECRET>");
       TransactionsApi apiInstance = new TransactionsApi();
       try {
           String requestId = null;
           String coboIds = null;
           String transactionIds = null;
           String transactionHashes = "";
           String types = "Deposit";
           String statuses = "Confirming, Completed";
           String walletIds = "<YOUR_WALLET_ID>";
           String chainIds = null;
           String tokenIds = null;
           String assetIds = null;
           UUID vaultId = null;
           UUID projectId = null;
           Long minCreatedTimestamp = null;
           Long maxCreatedTimestamp = null;
           Integer limit = 50;
           String before = null;
           String after = null;


           ListTransactions200Response result = apiInstance.listTransactions(
                   requestId, coboIds, transactionIds, transactionHashes, types, statuses, walletIds, chainIds,
                   tokenIds, assetIds, vaultId, projectId, minCreatedTimestamp, maxCreatedTimestamp, limit, before, after);
           System.out.println(result);
       } catch (ApiException e) {
           System.err.println("Exception when calling WalletsApi#createAddress");
           System.err.println("Status code: " + e.getCode());
           System.err.println("Reason: " + e.getResponseBody());
           System.err.println("Response headers: " + e.getResponseHeaders());
           e.printStackTrace();
       }
   }
}
```
</Accordion>


### æå–ä»£å¸

ç°åœ¨æ‚¨çš„é’±åŒ…ä¸­å·²ç»æœ‰ä»£å¸äº†ï¼Œè®©æˆ‘ä»¬æ¥äº†è§£æç°æµç¨‹ã€‚åœ¨è¿›è¡Œç¬¬ä¸€æ¬¡æç°ä¹‹å‰ï¼Œæ‚¨éœ€è¦äº†è§£ä¸¤ä¸ªé‡è¦äº‹é¡¹ï¼š

1. **æç°æµç¨‹**ï¼šæç°æ¶‰åŠå¤šä¸ªæ­¥éª¤ï¼ŒåŒ…æ‹¬å‘èµ·ã€äºŒæ¬¡ç¡®è®¤ã€é£é™©æ§åˆ¶æ£€æŸ¥å’Œäº¤æ˜“ç­¾åã€‚è¦è¯¦ç»†äº†è§£æ¯ä¸ªæ­¥éª¤ï¼Œè¯·å‚é˜…[ä» MPC é’±åŒ…ï¼ˆæœºæ„æ§åˆ¶é’±åŒ…ï¼‰è½¬è´¦](https://manuals.cobo.com/cn/portal/transfers/from-mpc-wallets#withdrawal-process)ã€‚

2. **Callback Endpoint è®¾ç½®**ï¼šä¸ºäº†å¢å¼ºå®‰å…¨æ€§ï¼Œæ‚¨åº”è¯¥è®¾ç½®ä¸€ä¸ª Callback Endpoint æ¥äºŒæ¬¡ç¡®è®¤æç°è¯·æ±‚ã€‚å½“æ‚¨é€šè¿‡ WaaS 2.0 API å‘èµ·æç°æ—¶ï¼Œè¯¥ Endpoint å°†æ¥æ”¶äº¤æ˜“è¯¦æƒ…ï¼Œå¹¶ä¸”å¿…é¡»ç¡®è®¤è¿™äº›è¯¦æƒ…åæ‰èƒ½ç»§ç»­è¿›è¡Œäº¤æ˜“ã€‚è¦è¿›è¡Œè®¾ç½®ï¼Œè¯·å‚è€ƒæˆ‘ä»¬çš„ [Webhook å’Œ Callback](/v2/guides/webhooks-callbacks/introduction) æŒ‡å—ã€‚

#### å‘èµ·æç°
äº†è§£è¿™äº›æ¦‚å¿µåï¼Œæ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ [Transfer token](/v2/api-references/transactions/transfer-token) æ“ä½œæ¥å‘èµ·æç°ã€‚åœ¨è¯·æ±‚åŒ…ä½“ä¸­è®¾ç½®ä»¥ä¸‹å±æ€§ï¼š


- `request_id`ï¼šæ‚¨çš„è¯·æ±‚ IDã€‚
- `source.source_type`ï¼š`Org-Controlled`ã€‚
- `source.wallet_id`ï¼šæ‚¨åˆšåˆšåˆ›å»ºçš„é’±åŒ… IDã€‚
- `token_id`ï¼šæ‚¨è¦æå–çš„ä»£å¸ IDã€‚
- `destination.destination_type`ï¼š`Address`ã€‚
- `destination.account_output`ï¼šæ¥æ”¶åœ°å€å’Œ memoï¼ˆå¦‚æœ‰ï¼‰ï¼Œä»¥åŠæ‚¨è¦æå–çš„é‡‘é¢ã€‚
- `category_names`ï¼šç”¨äºè¯†åˆ«äº¤æ˜“çš„è‡ªå®šä¹‰ç±»åˆ«ã€‚
- `description`ï¼šè½¬è´¦çš„æè¿°ã€‚

<Accordion title="Sample code in Python">
```py
import json
import uuid

import cobo_waas2
from cobo_waas2 import (
   CreateAddressRequest,
   AddressEncoding,
   TransferParams,
   TransferSource,
   MpcTransferSource,
   WalletSubtype,
   TransferDestination, AddressTransferDestination, TransferDestinationType, AddressTransferDestinationAccountOutput,
)

configuration = cobo_waas2.Configuration(
   # Replace `<YOUR_API_SECRET>` with your API secret
   api_private_key="<YOUR_API_SECRET>",
   # Use the development environment
   host="https://api.dev.cobo.com/v2"
)

# Enter a context with an instance of the API client
with cobo_waas2.ApiClient(configuration) as api_client:
   # Create an instance of the API class
   transaction_api_instance = cobo_waas2.TransactionsApi(api_client)
   try:
       # Withdraw Bitcoin testnet3(XTN) tokens from the wallet
       api_response = transaction_api_instance.create_transfer_transaction(
           transfer_params=TransferParams(
               request_id=str(uuid.uuid4()),
               source=TransferSource(
                   actual_instance=MpcTransferSource
                   (
                       source_type=WalletSubtype.ORG_CONTROLLED,
                       wallet_id="<YOUR_WALLET ID>",
                   )
               ),
               token_id="XTN",
               destination=TransferDestination(
                   actual_instance=AddressTransferDestination(
                       destination_type=TransferDestinationType.ADDRESS,
                       account_output=AddressTransferDestinationAccountOutput(
                           address="<TARGET_ADDRESS>",
                           amount="<TRANSFER_AMOUNT>"
                       )
                   )
               ),
               category_names=["<CATEGORY_NAME>"],
               description="<DESCRIPTION>",
           )
       )
       print("The response of TransactionsApi->create_transfer_transaction:")
       print(json.dumps(api_response.to_dict(), indent=2))

   except Exception as e:
       print("Exception when calling TransactionsApi->create_transfer_transaction, %s\n", e)
```
</Accordion>



<Accordion title="Sample code in Java">
```java
import com.cobo.waas2.ApiClient;
import com.cobo.waas2.ApiException;
import com.cobo.waas2.Configuration;
import com.cobo.waas2.Env;
import com.cobo.waas2.api.TransactionsApi;
import com.cobo.waas2.model.*;

import java.util.ArrayList;
import java.util.List;
import java.util.UUID;

public class TransferExample {
    public static void main(String[] args) {
        ApiClient defaultClient = Configuration.getDefaultApiClient();
        // Use the development environment
        defaultClient.setEnv(Env.DEV);
        // Replace `<YOUR_API_SECRET>` with your API secret
        defaultClient.setPrivKey("<YOUR_API_SECRET>");
        TransactionsApi apiInstance = new TransactionsApi();
        try {
            UUID walletId = UUID.fromString("<YOUR_WALLET_ID>");

            TransferParams params = new TransferParams();
            params.setRequestId("Demo" + UUID.randomUUID());

            MpcTransferSource transferSource = new MpcTransferSource().sourceType(WalletSubtype.ORG_CONTROLLED).walletId(walletId);
            params.setSource(new TransferSource(transferSource));

            params.setTokenId("XTN");
            AddressTransferDestination addressTransferDestination = new AddressTransferDestination()
                    .destinationType(TransferDestinationType.ADDRESS)
                    .accountOutput(new AddressTransferDestinationAccountOutput()
                            .address("<TARGET_ADDRESS>")
                            .amount("<TRANSFER_AMOUNT>"));
            params.setDestination(new TransferDestination(addressTransferDestination));

            List<String> categoryNames = new ArrayList<>();
            categoryNames.add("<Category Example>");
            params.categoryNames(categoryNames).description("<Description Example>");

            CreateTransferTransaction201Response result = apiInstance.createTransferTransaction(params);
            System.out.println(result);
        } catch (ApiException e) {
            System.err.println("Exception when calling TransactionsApi#createTransferTransaction");
            System.err.println("Status code: " + e.getCode());
            System.err.println("Reason: " + e.getResponseBody());
            System.err.println("Response headers: " + e.getResponseHeaders());
            e.printStackTrace();
        }
    }
}
```
</Accordion>

æå¸è¯·æ±‚çš„å“åº”å¦‚ä¸‹ã€‚è®°å½•äº¤æ˜“ IDï¼Œå› ä¸ºæ‚¨å°†åœ¨åç»­æ­¥éª¤ä¸­ä½¿ç”¨å®ƒã€‚

```json
{
   "request_id": "<YOUR_REQUEST_ID>",
   "transaction_id": "<THE_GENERATED_TRANSACTION_ID>",
   "status": "Submitted"
}
```

#### ç¡®è®¤æå¸

å¦‚æœæ‚¨è®¾ç½®äº† Callback Endpointï¼Œåœ¨å‘èµ·æå¸äº¤æ˜“åï¼Œæ‚¨çš„ Callback Endpoint å°†æ¥æ”¶åŒ…å«äº¤æ˜“è¯¦ç»†ä¿¡æ¯çš„æ¶ˆæ¯ã€‚æ£€æŸ¥äº¤æ˜“æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œç„¶åå“åº”æˆåŠŸçŠ¶æ€ç ï¼ˆ200 æˆ– 201ï¼‰å’Œå“åº”åŒ…ä½“ `ok` ä»¥æ‰¹å‡†äº¤æ˜“ã€‚è¦äº†è§£æ›´å¤šå…³äºå¤„ç† Callback æ¶ˆæ¯çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…[å®ç°å¤„ç†é€»è¾‘](/v2_cn/guides/webhooks-callbacks/set-up-endpoint#%E5%AE%9E%E7%8E%B0%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91)ã€‚



#### ç­¾ç½²äº¤æ˜“
ç¡®è®¤æå¸åï¼Œç³»ç»Ÿå°†æ ¹æ®æ‚¨çš„ç­¾åæ¨¡å¼å’Œç­¾åäººç±»å‹å°†äº¤æ˜“å‘é€ç»™å¯¹åº”çš„ç­¾åäººã€‚äº¤æ˜“å°†ä¿æŒ Pending çŠ¶æ€ï¼Œç›´åˆ°æ”¶åˆ°å¿…è¦çš„ç­¾åã€‚

- å¯¹äºç§»åŠ¨ç«¯ç­¾åäººï¼Œæ‚¨éœ€è¦é€šçŸ¥ä»–ä»¬æ‰“å¼€ Cobo Guard åº”ç”¨å¹¶ç­¾ç½²äº¤æ˜“ã€‚
- å¯¹äºæœåŠ¡ç«¯ç­¾åäººï¼Œæ‚¨å¯ä»¥é€šè¿‡ Cobo Portal æŸ¥çœ‹ç­¾åäººæ˜¯å¦åœ¨çº¿ï¼š
    1. ç™»å½• [Cobo Portal](https://portal.cobo.com/login)ã€‚
    2. ç‚¹å‡» <img src="/cn/images/guides/wallets-icon.svg" className="icon"></img> > **MPC é’±åŒ…**ã€‚
    3. é€‰æ‹©æ‚¨çš„ Vaultï¼Œç„¶åç‚¹å‡»å³ä¸Šè§’çš„ <img src="/cn/images/guides/manage-key-share-group.svg" className="icon"></img> å›¾æ ‡ã€‚
    4. åœ¨**ç§é’¥åˆ†ç‰‡ç®¡ç†**é¡µé¢ï¼Œæ‰¾åˆ°æ‚¨çš„æœåŠ¡ç«¯ç­¾åäººï¼Œå¹¶æŸ¥çœ‹æ—è¾¹çš„çŠ¶æ€æŒ‡ç¤ºï¼š
        - ğŸŸ¢ ç»¿ç‚¹ï¼šç­¾åäººåœ¨çº¿å¹¶å‡†å¤‡ç­¾ç½²äº¤æ˜“
        - æ— ç»¿ç‚¹ï¼šç­¾åäººç¦»çº¿ï¼Œæ— æ³•ç­¾ç½²äº¤æ˜“ã€‚

        <img src="/cn/images/guides/greendot.png" className="screenshot_modal" alt="å¯†é’¥ä»½é¢ç®¡ç†é¡µé¢æ˜¾ç¤ºç­¾åäººçŠ¶æ€"/>

#### ç›‘æ§æå¸çŠ¶æ€

é™¤äº† Webhook äº‹ä»¶å¤–ï¼Œæ‚¨è¿˜å¯ä»¥è°ƒç”¨ [Get transaction information](/v2/api-references/transactions/get-transaction-information) æ¥æŸ¥è¯¢äº¤æ˜“çŠ¶æ€ã€‚å°†è·¯å¾„å‚æ•° `transaction_id` è®¾ç½®ä¸ºä¸Šä¸€æ­¥æå¸è¯·æ±‚å“åº”ä¸­çš„äº¤æ˜“ IDã€‚


<Accordion title="Sample code in Python">
```python
import json
import uuid


import cobo_waas2
from cobo_waas2 import (
   CreateAddressRequest,
   AddressEncoding,
   TransferParams,
   TransferSource,
   MpcTransferSource,
   WalletSubtype,
   TransferDestination, AddressTransferDestination, TransferDestinationType, AddressTransferDestinationAccountOutput,
)


configuration = cobo_waas2.Configuration(
   # Replace `<YOUR_API_SECRET>` with your API secret.
   api_private_key="<YOUR_API_SECRET>",
   # Use the development environment.
   host="https://api.dev.cobo.com/v2"
)


# Enter a context with an instance of the API client
with cobo_waas2.ApiClient(configuration) as api_client:
   # Create an instance of the API class
   transaction_api_instance = cobo_waas2.TransactionsApi(api_client)
   try:
       # Get transaction by ID
       api_response = transaction_api_instance.get_transaction_by_id(
           transaction_id="<YOUR_TRANSACTION_ID>"
       )
       print("The response of TransactionsApi->get_transaction_by_id:")
       print(json.dumps(api_response.to_dict(), indent=2))


   except Exception as e:
       print("Exception when calling TransactionsApi->get_transaction_by_id, %s\n", e)
```
</Accordion>



<Accordion title="Sample code in Java">
```java
import com.cobo.waas2.ApiClient;
import com.cobo.waas2.ApiException;
import com.cobo.waas2.Configuration;
import com.cobo.waas2.Env;
import com.cobo.waas2.api.TransactionsApi;
import com.cobo.waas2.model.TransactionDetail;


import java.util.UUID;


public class GetTransactionExample {
   public static void main(String[] args) {
       ApiClient defaultClient = Configuration.getDefaultApiClient();
       // Use the development environment
       defaultClient.setEnv(Env.DEV);
       // Replace `<YOUR_API_SECRET>` with your API secret
       defaultClient.setPrivKey("<YOUR_API_SECRET>");
       TransactionsApi apiInstance = new TransactionsApi();
       try {
           UUID transactionId = UUID.fromString("<YOUR_TRANSACTION_ID>");


           TransactionDetail result = apiInstance.getTransactionById(transactionId);
           System.out.println(result);
       } catch (ApiException e) {
           System.err.println("Exception when calling TransactionsApi#getTransactionById");
           System.err.println("Status code: " + e.getCode());
           System.err.println("Reason: " + e.getResponseBody());
           System.err.println("Response headers: " + e.getResponseHeaders());
           e.printStackTrace();
       }
   }
}
```
</Accordion>

## 3. æŸ¥è¯¢é’±åŒ…ä½™é¢

æˆåŠŸæå–ä»£å¸åï¼Œæ‚¨å¯ä»¥è°ƒç”¨[ List token balances by wallet](/v2/api-references/wallets/list-token-balances-by-wallet) æ¥æŸ¥è¯¢é’±åŒ…ä½™é¢ã€‚æŒ‡å®šä»¥ä¸‹è·¯å¾„å’ŒæŸ¥è¯¢å‚æ•°ï¼š

- `wallet_id`ï¼šæ‚¨åˆšåˆšåˆ›å»ºçš„é’±åŒ… IDã€‚
- `token_ids`ï¼šæ‚¨å¯ä»¥ç•™ç©ºæ­¤å‚æ•°æ¥æŸ¥è¯¢æ‰€æœ‰ä»£å¸çš„ä½™é¢ï¼Œæˆ–è€…è®¾ç½®ä¸ºæ‚¨è¦æŸ¥è¯¢çš„ç‰¹å®šä»£å¸ã€‚


<Accordion title="Sample code in Python">
```py
import json


import cobo_waas2
from cobo_waas2 import (
   WalletType,
   WalletSubtype,
)


configuration = cobo_waas2.Configuration(
   # Replace `<YOUR_API_SECRET>` with your API secret.
   api_private_key="<YOUR_API_SECRET>",
   # Use the development environment.
   host="https://api.dev.cobo.com/v2"
)


# Enter a context with an instance of the API client
with cobo_waas2.ApiClient(configuration) as api_client:
   # Create an instance of the API class
   wallet_api_instance = cobo_waas2.WalletsApi(api_client)
   try:
       # List token balances
       api_response = wallet_api_instance.list_token_balances_for_wallet(
           wallet_id="<YOUR_WALLET_ID>",
       )
       print(f"The response of WalletsApi->list_token_balances_for_wallet:")
       print(json.dumps(api_response.to_dict(), indent=2))


   except Exception as e:
       print("Exception when calling WalletsApi->list_token_balances_for_wallet, %s\n", e)
```
</Accordion>



<Accordion title="Sample code in Java">
```java
import com.cobo.waas2.ApiClient;
import com.cobo.waas2.ApiException;
import com.cobo.waas2.Configuration;
import com.cobo.waas2.Env;
import com.cobo.waas2.api.WalletsApi;
import com.cobo.waas2.model.ListTokenBalancesForAddress200Response;

import java.util.UUID;

public class ListTokenBalancesExample {
    public static void main(String[] args) {
        ApiClient defaultClient = Configuration.getDefaultApiClient();
        // Use the development environment
        defaultClient.setEnv(Env.DEV);
        // Replace `<YOUR_API_SECRET>` with your API secret
        defaultClient.setPrivKey("<YOUR_API_SECRET>");
        WalletsApi apiInstance = new WalletsApi();
        try {
            UUID wallet_id = UUID.fromString("<YOUR_WALLET_ID>");
            String tokenIds = null;
            Integer limit = 50;
            String before = null;
            String after = null;
            ListTokenBalancesForAddress200Response result = apiInstance.listTokenBalancesForWallet(wallet_id, tokenIds, limit, before, after);
            System.out.println(result);
        } catch (ApiException e) {
            System.err.println("Exception when calling WalletsApi#listTokenBalancesForWallet");
            System.err.println("Status code: " + e.getCode());
            System.err.println("Reason: " + e.getResponseBody());
            System.err.println("Response headers: " + e.getResponseHeaders());
            e.printStackTrace();
        }
    }
}
```
</Accordion>

<Tip>æ¬¢è¿æ‚¨[æäº¤åé¦ˆ](https://forms.zohopublic.com/cobo/form/DocumentFeedbackForm/formperma/QvLOhxJv1_JMsJ-1dleZ8Itb_7rzN-LtgvsDdxosoVI)æ¥å¸®åŠ©æ”¹è¿›æˆ‘ä»¬çš„æ–‡æ¡£ï¼</Tip>